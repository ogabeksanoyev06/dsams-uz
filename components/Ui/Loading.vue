<script setup>
  import { useSpinStore } from "@/stores/spin.js";
  import { gsap } from "gsap";

  const spinStore = useSpinStore();

  const { loader } = storeToRefs(spinStore);

  onMounted(() => {
    if (loader) {
      gsap.fromTo(
        ".loader-logo",
        {
          opacity: 1,
        },
        {
          fillOpacity: 1,
          duration: 2,
          delay: 2,
          onComplete: () => {
            loader.value = false;
          },
        }
      );
    }
  });
</script>
<template>
  <div v-if="loader" class="fixed z-50 h-[100vh] w-full bg-white text-white">
    <div class="flex h-[100vh] items-center justify-center">
      <svg version="1.1" width="150" height="150" viewBox="-188.247 470.163 78.939 90.801" xmlns="http://www.w3.org/2000/svg">
        <defs></defs>
        <path
          class="loader-logo"
          d="M -187.498 471.261 C -162.089 471.261 -136.682 471.261 -110.503 471.261 C -110.503 476.405 -110.503 481.548 -110.503 486.847 C -111.353 486.886 -112.204 486.925 -113.08 486.965 C -113.527 487.003 -113.964 487.043 -114.406 487.104 C -114.515 487.119 -114.625 487.133 -114.738 487.149 C -117.799 487.593 -120.735 488.544 -123.511 489.895 C -123.597 489.937 -123.683 489.978 -123.772 490.022 C -126.053 491.145 -128.177 492.616 -130.044 494.34 C -130.276 494.553 -130.513 494.755 -130.755 494.956 C -135.318 498.959 -138.265 505.1 -139.331 510.989 C -139.35 511.092 -139.37 511.195 -139.39 511.302 C -140.705 518.801 -138.726 526.632 -134.437 532.852 C -133.817 533.735 -133.13 534.557 -132.417 535.366 C -132.34 535.454 -132.34 535.454 -132.262 535.544 C -127.377 541.108 -120.129 544.626 -112.747 545.135 C -112.416 545.155 -112.084 545.171 -111.752 545.185 C -111.334 545.209 -110.918 545.267 -110.503 545.327 C -110.503 550.432 -110.503 555.537 -110.503 560.796 C -122.746 560.796 -134.065 555.875 -142.73 547.32 C -143.011 547.025 -143.282 546.727 -143.548 546.42 C -143.806 546.123 -144.074 545.84 -144.342 545.554 C -145.114 544.703 -145.795 543.787 -146.48 542.865 C -146.544 542.78 -146.609 542.696 -146.674 542.608 C -147.684 541.262 -148.575 539.872 -149.41 538.412 C -149.468 538.312 -149.526 538.212 -149.585 538.108 C -152.361 533.273 -154 528.065 -154.919 522.591 C -154.941 522.458 -154.964 522.325 -154.988 522.188 C -155.643 518.157 -155.589 513.611 -154.919 509.583 C -154.898 509.453 -154.878 509.324 -154.856 509.19 C -153.511 500.948 -150.047 493.312 -144.605 486.965 C -158.759 486.926 -172.914 486.887 -187.498 486.847 C -187.498 481.704 -187.498 476.561 -187.498 471.261 Z"
        ></path>
      </svg>
    </div>
  </div>
</template>
<style lang="css" scoped>
  .loader-logo {
    stroke: black;
    fill: black;
    fill-opacity: 0;
    stroke-width: 1px;
    stroke-dasharray: 4500;
    animation: draw 20s ease;
  }

  @keyframes draw {
    0% {
      stroke-dashoffset: 4500;
    }

    100% {
      stroke-dashoffset: 0;
    }
  }
</style>
